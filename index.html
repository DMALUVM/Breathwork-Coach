<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breathwork Coach</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #e8f4fd;
            color: #333;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #007bff;
            text-align: center;
            margin-bottom: 10px;
        }

        h2, h3 {
            color: #0056b3;
        }

        .tab-content {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .exercise {
            margin-bottom: 25px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.05);
        }

        .exercise.completed {
            background: #d4edda;
            border: 1px solid #28a745;
        }

        .timer {
            font-size: 32px;
            font-weight: 700;
            margin: 15px 0;
            color: #28a745;
            font-family: monospace;
            text-align: center;
            transition: color 0.3s;
        }

        .timer.running {
            color: #ffc107;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        button {
            padding: 10px 16px;
            margin-right: 8px;
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 6px;
            font-weight: 500;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3);
        }

        .progress {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.05);
        }

        .progress label {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .progress input[type="checkbox"] {
            margin-right: 10px;
            accent-color: #007bff;
        }

        #calendar-container {
            margin-top: 20px;
        }

        #calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            text-align: center;
        }

        .calendar-header {
            font-weight: bold;
            color: #007bff;
            grid-column: span 7;
            margin-bottom: 10px;
        }

        .calendar-weekday {
            font-weight: bold;
            color: #6c757d;
            text-align: center;
            padding: 5px 0;
        }

        .calendar-day {
            padding: 10px;
            border-radius: 50%;
            font-weight: bold;
            cursor: default;
        }

        .calendar-day.complete {
            background-color: #28a745;
            color: white;
        }

        .calendar-day.incomplete {
            background-color: #dc3545;
            color: white;
        }

        .calendar-day.empty {
            background-color: #e9ecef;
            color: #6c757d;
        }

        .breather {
            width: 100px;
            height: 100px;
            margin: 0 auto 15px;
            background: radial-gradient(circle, #007bff 0%, transparent 70%);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .breather.active {
            opacity: 0.7;
        }

        .breather.generic {
            animation: genericBreathe 10s infinite ease-in-out;
        }

        @keyframes genericBreathe {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.2); }
            100% { transform: scale(0.8); }
        }

        .breather.pursedlip {
            animation: pursedlipBreathe 6s infinite linear;
        }

        @keyframes pursedlipBreathe {
            0% { transform: scale(0.8); }
            33% { transform: scale(1.2); }
            100% { transform: scale(0.8); }
        }

        .breather.diaphragmatic {
            animation: diaphragmaticBreathe 10s infinite linear;
        }

        @keyframes diaphragmaticBreathe {
            0% { transform: scale(0.8); }
            40% { transform: scale(1.2); }
            100% { transform: scale(0.8); }
        }

        .breather.breathfocus {
            animation: genericBreathe 10s infinite linear;
        }

        .breather.lions {
            animation: lionsBreathe 5s infinite linear;
        }

        @keyframes lionsBreathe {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.2); }
            100% { transform: scale(0.8); }
        }

        .breather.alternatenostril {
            animation: alternatenostrilBreathe 8s infinite linear;
        }

        @keyframes alternatenostrilBreathe {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.2); }
            100% { transform: scale(0.8); }
        }

        .breather.equal {
            animation: equalBreathe 8s infinite linear;
        }

        @keyframes equalBreathe {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.2); }
            100% { transform: scale(0.8); }
        }

        .breather.coherent {
            animation: coherentBreathe 10s infinite linear;
        }

        @keyframes coherentBreathe {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.2); }
            100% { transform: scale(0.8); }
        }

        .breather.sitali {
            animation: sitaliBreathe 10s infinite linear;
        }

        @keyframes sitaliBreathe {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.2); }
            100% { transform: scale(0.8); }
        }

        .breather.deep {
            animation: deepBreathe 12s infinite linear;
        }

        @keyframes deepBreathe {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.2); }
            100% { transform: scale(0.8); }
        }

        .breather.bhramari {
            animation: bhramariBreathe 10s infinite linear;
        }

        @keyframes bhramariBreathe {
            0% { transform: scale(0.8); }
            40% { transform: scale(1.2); }
            100% { transform: scale(0.8); }
        }

        .breather.box {
            animation: boxBreathe 16s infinite linear;
        }

        @keyframes boxBreathe {
            0% { transform: scale(0.8); }
            25% { transform: scale(1.2); }
            50% { transform: scale(1.2); }
            75% { transform: scale(0.8); }
            100% { transform: scale(0.8); }
        }

        .breather.ujjayi {
            animation: ujjayiBreathe 10s infinite linear;
        }

        @keyframes ujjayiBreathe {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.2); }
            100% { transform: scale(0.8); }
        }

        .breather.kapalabhati {
            animation: kapalabhatiBreathe 2s infinite ease-in-out;
        }

        @keyframes kapalabhatiBreathe {
            0% { transform: scale(1.0); }
            50% { transform: scale(0.9); }
            100% { transform: scale(1.0); }
        }

        .breather.bhastrika {
            animation: bhastrikaBreathe 1s infinite ease-in-out;
        }

        @keyframes bhastrikaBreathe {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.2); }
            100% { transform: scale(0.8); }
        }

        .breather.wimhof {
            animation: wimhofBreathe 2s infinite linear;
        }

        @keyframes wimhofBreathe {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.5); }
            100% { transform: scale(0.8); }
        }

        .breather.tummo {
            animation: tummoBreathe 20s infinite linear;
        }

        @keyframes tummoBreathe {
            0% { transform: scale(0.8); }
            30% { transform: scale(1.2); }
            70% { transform: scale(1.2); }
            100% { transform: scale(0.8); }
        }

        .breather.holotropic {
            animation: holotropicBreathe 3s infinite ease-in-out;
        }

        @keyframes holotropicBreathe {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.3); }
            100% { transform: scale(0.8); }
        }

        @media (max-width: 600px) {
            button {
                width: 100%;
                margin-bottom: 10px;
            }
            
            .breather {
                width: 80px;
                height: 80px;
            }
        }

        .duration-input {
            margin-bottom: 10px;
        }

        .duration-input label {
            font-size: 14px;
        }

        .duration-input input {
            width: 50px;
            margin-left: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Daily Breathwork Routine</h1>
        <p>Your guide to feeling better, boosting HRV, reducing stress, and personal growth. Practice daily!</p>
        
        <div id="daily" class="tab-content">
            <h2>Daily: Wellness and Stress Reduction (10-20 min)</h2>
            <div class="exercise" id="daily-exercise">
                <h3 id="daily-title"></h3>
                <p id="daily-desc"></p>
                <div class="duration-input"><label>Duration (min): <input type="number" id="daily-duration" value="15" min="10" max="20"></label></div>
                <div class="timer" id="daily-timer">00:00</div>
                <div class="breather" id="daily-breather"></div>
                <button onclick="startTimer('daily')">Start</button>
                <button onclick="pauseTimer('daily')">Pause</button>
                <button onclick="resetTimer('daily')">Reset</button>
                <button onclick="completeExercise('daily')">Complete</button>
            </div>
        </div>
        
        <div class="progress">
            <h2>Daily Progress</h2>
            <label><input type="checkbox" id="daily-check"> Daily Completed</label>
            <button onclick="resetProgress()">Reset Day</button>
            <button onclick="clearAllProgress()">Clear All Progress</button>
            <div id="calendar-container">
                <h3>Monthly Calendar</h3>
                <div id="calendar"></div>
            </div>
        </div>
    </div>
    <audio id="chime" src="https://indiemusicbox.s3.amazonaws.com/downloads/meditation-bell-pack/Meditation+Bell+1.mp3"></audio>
    <script>
        let timers = {}; // Store timer states for each id
        let progressData = JSON.parse(localStorage.getItem('breathwork-progress')) || {}; // { 'YYYY-MM-DD': {daily: bool, completed: {} } }
        let completedExercises = {};
        let currentRoutine = null;
        let wakeLock = null;

        const routines = [
            {
                id: 'pursedlip',
                title: 'Pursed Lip Breathing',
                desc: 'Relax your neck and shoulders. Inhale slowly through your nose for 2 counts with your mouth closed. Pucker or purse your lips as though going to whistle. Exhale slowly by blowing air through pursed lips for a count of 4. Practice 4 to 5 times a day when beginning.<br>Benefits: Helps slow down your breathing pace, making it useful during activities like bending, lifting, or climbing stairs. It promotes relaxation and reduces stress.',
                breatherClass: 'pursedlip'
            },
            {
                id: 'diaphragmatic',
                title: 'Diaphragmatic Breathing',
                desc: 'Lie on your back with knees slightly bent and head on a pillow. Place one hand on your upper chest and one below your rib cage. Inhale slowly through your nose, feeling your stomach press into your hand. Exhale using pursed lips, tightening your abdominal muscles. Practice for 5 to 10 minutes, 3 to 4 times daily.<br>Benefits: Improves diaphragm use, reduces stress, and is beneficial for conditions like COPD, heart problems, high blood pressure, and migraine headaches.',
                breatherClass: 'diaphragmatic'
            },
            {
                id: 'breathfocus',
                title: 'Breath Focus Technique',
                desc: 'Sit or lie comfortably. Alternate between normal and deep breaths. Place a hand below your belly button and notice it rise and fall. Combine with imagery and a focus word like "peace". Start with 10-minute sessions, increasing to 20 minutes.<br>Benefits: Promotes relaxation through imagery and focus, helping to reduce anxiety and enhance overall wellbeing.',
                breatherClass: 'breathfocus'
            },
            {
                id: 'lions',
                title: 'Lion’s Breath',
                desc: 'Sit comfortably. Inhale deeply through your nose, then open your mouth wide, stick out your tongue, and exhale with a "haaa" sound. Do this 2 to 3 times.<br>Benefits: Energizing and relieves tension in the jaw and face, contributing to stress reduction and emotional release.',
                breatherClass: 'lions'
            },
            {
                id: 'alternatenostril',
                title: 'Alternate Nostril Breathing',
                desc: 'Sit comfortably. Close your right nostril and inhale through the left, then close the left and exhale through the right. Continue alternating for up to 5 minutes.<br>Benefits: Promotes relaxation, enhances cardiovascular function, lowers heart rate, and balances the nervous system for better sleep and stress management.',
                breatherClass: 'alternatenostril'
            },
            {
                id: 'equal',
                title: 'Equal Breathing',
                desc: 'Sit comfortably. Inhale and exhale through your nose for an equal count (3 to 5). Add a pause if comfortable. Continue for at least 5 minutes.<br>Benefits: Brings balance and equanimity, increases oxygen supply to the brain and lungs, improving mental wellbeing and reducing stress.',
                breatherClass: 'equal'
            },
            {
                id: 'coherent',
                title: 'Coherent Breathing',
                desc: 'Inhale for a count of 5, exhale for a count of 5. Continue for at least a few minutes.<br>Benefits: Maximizes heart rate variability, reduces stress, and can alleviate symptoms of depression when combined with yoga practices.',
                breatherClass: 'coherent'
            },
            {
                id: 'sitali',
                title: 'Sitali Breath',
                desc: 'Sit comfortably. Curl your tongue and inhale through your mouth, exhale through your nose. Continue for up to 5 minutes.<br>Benefits: Cools the body, calms the mind, reduces stress, and improves focus and digestion.',
                breatherClass: 'sitali'
            },
            {
                id: 'deep',
                title: 'Deep Breathing',
                desc: 'Sit or stand straight. Inhale through your nose, expanding your abdomen, rib cage, and upper chest. Exhale in reverse order. Practice regularly.<br>Benefits: Increases oxygen supply, promotes relaxation, and enhances overall physical and mental health.',
                breatherClass: 'deep'
            },
            {
                id: 'bhramari',
                title: 'Humming Bee Breath (Bhramari)',
                desc: 'Sit comfortably. Close your eyes and ears, inhale, then exhale with a high-pitched hum. Practice for 5-10 minutes.<br>Benefits: Relieves tension, anger, and anxiety, promotes calmness and better sleep.',
                breatherClass: 'bhramari'
            },
            {
                id: 'box',
                title: 'Box Breathing',
                desc: 'Inhale for 4 counts, hold for 4, exhale for 4, hold for 4. Repeat.<br>Benefits: Improves focus, calms the mind, reduces stress, and enhances emotional regulation.',
                breatherClass: 'box'
            },
            {
                id: 'ujjayi',
                title: 'Ujjayi Breathing',
                desc: 'Inhale and exhale through your nose with a slight throat constriction, creating an ocean-like sound. Use equal counts.<br>Benefits: Builds internal heat, improves concentration, reduces stress, and supports yoga practice for overall wellbeing.',
                breatherClass: 'ujjayi'
            },
            {
                id: 'kapalabhati',
                title: 'Kapalabhati Pranayama',
                desc: 'Sit upright. Inhale deeply, then exhale in rapid bursts (20-30 pumps). Repeat 3-5 rounds.<br>Benefits: Increases alertness and energy, clears the mind, and supports detoxification for improved wellness.',
                breatherClass: 'kapalabhati'
            },
            {
                id: 'bhastrika',
                title: 'Bhastrika Pranayama',
                desc: 'Sit upright. Inhale and exhale forcefully through the nose in rapid succession (20-30 breaths). Repeat 3-5 rounds.<br>Benefits: Enhances vitality, mental clarity, reduces stress, and boosts overall energy levels.',
                breatherClass: 'bhastrika'
            },
            {
                id: 'wimhof',
                title: 'Wim Hof Breathing',
                desc: 'Sit or lie comfortably. Take 30-40 powerful breaths in and out through the mouth, fully inhaling to expand the chest and belly, then letting go on exhale without force. After the last exhale, hold your breath as long as comfortable. Then inhale deeply and hold for 15 seconds. Repeat for 3-4 rounds.<br>Benefits: Boosts immune function, reduces inflammation and stress, increases energy, focus, and resilience.',
                breatherClass: 'wimhof'
            },
            {
                id: 'tummo',
                title: 'Tummo Breathing',
                desc: 'Sit in a meditative posture. Inhale deeply through the nose, filling the lower belly. As you exhale, pull the navel in and up, contracting the pelvic floor and lower abdominal muscles to form a "vase" shape. Hold the contraction while taking shallow breaths. Visualize heat rising from the lower belly up the spine. Release and repeat cycles.<br>Benefits: Generates inner heat, enhances deep meditation, balances energy, reduces stress, and promotes profound wellbeing.',
                breatherClass: 'tummo'
            },
            {
                id: 'holotropic',
                title: 'Holotropic Breathwork (Shortened)',
                desc: 'Lie down comfortably. Breathe rapidly and deeply through the mouth without pauses, emphasizing full inhales and exhales to create a continuous flow. Maintain for 10-20 minutes, allowing emotions or sensations to arise. End with slower breaths to integrate.<br>Benefits: Facilitates emotional release, induces altered states for self-exploration, reduces chronic stress, and supports psychological healing.',
                breatherClass: 'holotropic'
            }
        ];

        async function requestWakeLock() {
            if ('wakeLock' in navigator) {
                try {
                    wakeLock = await navigator.wakeLock.request('screen');
                    wakeLock.addEventListener('release', () => {
                        console.log('Wake Lock has been released');
                    });
                } catch (err) {
                    console.error(`${err.name}, ${err.message}`);
                }
            }
        }

        function releaseWakeLock() {
            if (wakeLock !== null) {
                wakeLock.release().then(() => {
                    wakeLock = null;
                });
            }
        }

        document.addEventListener('visibilitychange', async () => {
            if (wakeLock !== null && document.visibilityState === 'visible') {
                await requestWakeLock();
            }
        });

        function getDailyRoutine() {
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const index = dayOfYear % routines.length;
            return routines[index];
        }

        function setDailyRoutine() {
            currentRoutine = getDailyRoutine();
            document.getElementById('daily-title').textContent = currentRoutine.title;
            document.getElementById('daily-desc').innerHTML = currentRoutine.desc;
        }

        function startTimer(id) {
            const durationInput = document.getElementById(`${id}-duration`);
            let duration = parseInt(durationInput.value) * 60 * 1000;
            if (isNaN(duration) || duration < 600000 || duration > 1200000) {
                alert('Please enter a valid duration (10-20 minutes).');
                return;
            }

            if (!timers[id]) {
                timers[id] = {
                    duration: duration,
                    elapsed: 0,
                    startTime: Date.now(),
                    interval: null
                };
            } else if (!timers[id].startTime) {
                // Resuming from pause
                timers[id].startTime = Date.now();
            } else {
                // Already running
                return;
            }

            if (timers[id].interval) {
                clearInterval(timers[id].interval);
            }

            document.getElementById(`${id}-timer`).classList.add('running');

            const breather = document.getElementById(`${id}-breather`);
            if (breather && currentRoutine) {
                breather.classList.add('active', currentRoutine.breatherClass);
            }

            timers[id].interval = setInterval(() => {
                updateTimerDisplay(id);
            }, 1000);

            requestWakeLock();
        }

        function pauseTimer(id) {
            if (timers[id] && timers[id].startTime) {
                timers[id].elapsed += Date.now() - timers[id].startTime;
                timers[id].startTime = null;
                clearInterval(timers[id].interval);
                timers[id].interval = null;
                document.getElementById(`${id}-timer`).classList.remove('running');
                const breather = document.getElementById(`${id}-breather`);
                if (breather && currentRoutine) {
                    breather.classList.remove('active', currentRoutine.breatherClass);
                }
                releaseWakeLock();
            }
        }

        function resetTimer(id) {
            if (timers[id]) {
                clearInterval(timers[id].interval);
                timers[id] = null;
                document.getElementById(`${id}-timer`).textContent = '00:00';
                document.getElementById(`${id}-timer`).classList.remove('running');
                const breather = document.getElementById(`${id}-breather`);
                if (breather && currentRoutine) {
                    breather.classList.remove('active', currentRoutine.breatherClass);
                }
                releaseWakeLock();
            }
        }

        function updateTimerDisplay(id) {
            if (!timers[id]) return;

            let currentElapsed = timers[id].elapsed;
            if (timers[id].startTime) {
                currentElapsed += Date.now() - timers[id].startTime;
            }

            let remainingMs = timers[id].duration - currentElapsed;
            if (remainingMs <= 0) {
                remainingMs = 0;
                clearInterval(timers[id].interval);
                timers[id].interval = null;
                document.getElementById(`${id}-timer`).classList.remove('running');
                const breather = document.getElementById(`${id}-breather`);
                if (breather && currentRoutine) {
                    breather.classList.remove('active', currentRoutine.breatherClass);
                }
                releaseWakeLock();
                completeExercise(id);
            }

            const minutes = Math.floor(remainingMs / 60000);
            const seconds = Math.floor((remainingMs % 60000) / 1000);
            document.getElementById(`${id}-timer`).textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function completeExercise(id) {
            if (completedExercises[id]) return;
            document.getElementById('chime').play().catch(() => {});
            alert(`Completed daily routine! Great job!`);
            completedExercises[id] = true;
            document.getElementById(`${id}-exercise`).classList.add('completed');
            checkSessionComplete('daily');
            releaseWakeLock();
        }

        function checkSessionComplete(session) {
            if (session === 'daily' && completedExercises['daily']) {
                document.getElementById('daily-check').checked = true;
                saveProgress();
            }
        }

        function getTodayDate() {
            const today = new Date();
            return `${today.getFullYear()}-${(today.getMonth() + 1).toString().padStart(2, '0')}-${today.getDate().toString().padStart(2, '0')}`;
        }

        function saveProgress() {
            const today = getTodayDate();
            if (!progressData[today]) progressData[today] = {};
            progressData[today].daily = document.getElementById('daily-check').checked;
            progressData[today].completed = completedExercises;
            localStorage.setItem('breathwork-progress', JSON.stringify(progressData));
            generateCalendar();
        }

        function resetProgress() {
            const today = getTodayDate();
            document.getElementById('daily-check').checked = false;
            completedExercises = {};
            progressData[today] = {daily: false, completed: {}};
            localStorage.setItem('breathwork-progress', JSON.stringify(progressData));
            document.querySelectorAll('.exercise').forEach(ex => ex.classList.remove('completed'));
            generateCalendar();
        }

        function clearAllProgress() {
            if (confirm('Are you sure? This will clear all calendar progress history.')) {
                progressData = {};
                localStorage.setItem('breathwork-progress', JSON.stringify(progressData));
                resetProgress();
                generateCalendar();
            }
        }

        function generateCalendar() {
            const calendar = document.getElementById('calendar');
            calendar.innerHTML = '';
            
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const firstDay = new Date(year, month, 1).getDay();
            
            const header = document.createElement('div');
            header.classList.add('calendar-header');
            header.textContent = now.toLocaleString('default', { month: 'long', year: 'numeric' });
            calendar.appendChild(header);
            
            ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].forEach(day => {
                const dayLabel = document.createElement('div');
                dayLabel.classList.add('calendar-weekday');
                dayLabel.textContent = day;
                calendar.appendChild(dayLabel);
            });
            
            for (let i = 0; i < firstDay; i++) {
                const empty = document.createElement('div');
                empty.classList.add('calendar-day', 'empty');
                calendar.appendChild(empty);
            }
            
            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = `${year}-${(month + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
                const dayElem = document.createElement('div');
                dayElem.classList.add('calendar-day');
                dayElem.textContent = day;
                
                if (progressData[dateStr] && progressData[dateStr].daily) {
                    dayElem.classList.add('complete');
                } else if (day > now.getDate()) {
                    dayElem.classList.add('empty');
                } else {
                    dayElem.classList.add('incomplete');
                }
                
                calendar.appendChild(dayElem);
            }
        }

        window.onload = () => {
            setDailyRoutine();
            const today = getTodayDate();
            if (progressData[today]) {
                document.getElementById('daily-check').checked = progressData[today].daily || false;
                completedExercises = progressData[today].completed || {};
                if (completedExercises['daily']) {
                    document.getElementById('daily-exercise').classList.add('completed');
                }
            }
            generateCalendar();
        };

        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', saveProgress);
        });
    </script>
</body>
</html>
